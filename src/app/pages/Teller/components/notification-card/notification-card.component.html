<div class="notification-card">
  <div class="notification-header">
    <div class="header-content">
      <span class="notification-title">Notifications</span>
      <span *ngIf="getUnreadCount() > 0" class="unread-badge">{{ getUnreadCount() }} new</span>
    </div>
    <div class="header-actions">
      <button *ngIf="getUnreadCount() > 0" class="mark-all-btn" (click)="onMarkAllRead()">
        Mark all read
      </button>
      <button class="close-btn" (click)="onClose()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
  </div>

  <div class="notification-content">
    <ng-container *ngIf="notifications.length; else noNotifications">
      <div class="notification-list">
        <div *ngFor="let notification of notifications; let i = index" class="notification-item"
          [class.unread]="!notification.isRead" (click)="onClick(notification)">
          <div class="notification-icon">
            <svg *ngIf="notification.type === 'warning'" width="16" height="16" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2.5" class="icon-warning">
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="12" y1="8" x2="12" y2="12"></line>
              <line x1="12" y1="16" x2="12.01" y2="16"></line>
            </svg>
            <svg *ngIf="notification.type === 'success'" width="16" height="16" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2.5" class="icon-success">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
              <polyline points="22,4 12,14.01 9,11.01"></polyline>
            </svg>
            <svg *ngIf="notification.type === 'info' || !notification.type" width="16" height="16" viewBox="0 0 24 24"
              fill="none" stroke="currentColor" stroke-width="2.5" class="icon-info">
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="12" y1="16" x2="12" y2="12"></line>
              <line x1="12" y1="8" x2="12.01" y2="8"></line>
            </svg>
          </div>

          <div class="notification-body">
            <div class="notification-header-row">
              <h4 class="notification-title-text">{{ notification.title || 'Notification' }}</h4>
              <div *ngIf="!notification.isRead" class="unread-dot"></div>
            </div>

            <p class="notification-message">{{ notification.message }}</p>

            <div class="notification-footer">
              <div class="notification-time">
                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"></circle>
                  <polyline points="12,6 12,12 16,14"></polyline>
                </svg>
                {{ notification.timestamp || 'Just now' }}
              </div>

              <button *ngIf="!notification.isRead" class="mark-read-btn"
                (click)="onMarkAsRead($event, notification.id)">
                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="20,6 9,17 4,12"></polyline>
                </svg>
                Mark read
              </button>
            </div>
          </div>
        </div>
      </div>
    </ng-container>

    <ng-template #noNotifications>
      <div class="notification-empty">
        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
          class="empty-icon">
          <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"></path>
          <path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"></path>
        </svg>
        <p class="empty-title">No notifications</p>
        <p class="empty-subtitle">You're all caught up!</p>
      </div>
    </ng-template>
  </div>
</div>
