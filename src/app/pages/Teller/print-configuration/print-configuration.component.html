<div class="print-config-container audit-dashboard soft-panel">
  <div class="nav-tabs">
    <button *ngFor="let tab of tabs" [class]="'tab-button ' + (tab.active ? 'active' : '')"
      (click)="selectTab(tab.value)">
      {{ tab.name }}
    </button>
  </div>
  <div class="controls-section">
    <div class="search-section">
      <div class="search-container">
        <div class="search-box">
          <svg class="search-icon-left" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
          </svg>
          <input type="search" class="search-input" placeholder="Search Config" #searchInput
                 (input)="searchConfigs(searchInput.value)" />
          <div class="search-svg" (click)="searchConfigs(searchInput.value)">
            <svg width="60" height="52" viewBox="0 0 60 52" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M0 -4H60V56H32C14.3269 56 0 41.6731 0 24V-4Z" fill="url(#paint0_linear_103_946)" />
              <path
                d="M40.6191 33.3097L34.439 26.8264L31.2412 30.1787L37.4258 36.662C37.9333 37.194 38.7687 37.194 39.2762 36.662L40.6191 35.2542C41.1267 34.7175 41.1267 33.8371 40.6191 33.3097Z"
                fill="#FEFDFE" />
              <path
                d="M31.3809 28.7333L33.0562 26.9772L31.1474 24.9761C32.9529 22.2501 32.7014 18.474 30.3839 16.0446C27.7834 13.3185 23.557 13.3185 20.952 16.0446C18.3471 18.7706 18.3516 23.2011 20.952 25.9319C23.2696 28.3614 26.8716 28.625 29.4721 26.7323L31.3809 28.7333ZM22.2456 24.5571C20.3592 22.5796 20.3592 19.3733 22.2456 17.4005C24.1319 15.4231 27.1905 15.4231 29.0724 17.4005C30.9588 19.378 30.9588 22.5843 29.0724 24.5571C27.1905 26.5346 24.1319 26.5346 22.2456 24.5571Z"
                fill="#FEFDFE" />
              <defs>
                <linearGradient id="paint0_linear_103_946" x1="5.5" y1="-4" x2="60" y2="47"
                  gradientUnits="userSpaceOnUse">
                  <stop stop-color="#041643" />
                  <stop offset="1" stop-color="#3E5ADF" />
                </linearGradient>
              </defs>
            </svg>
          </div>
        </div>
      </div>
    </div>
    <div class="download-buttons">
      <button class="download-btn" (click)="downloadJSON()">Download JSON</button>
      <button class="download-btn" (click)="downloadCSV()">Download CSV</button>
      <button class="add-print-config-btn" (click)="openPrintModal()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 5v14M5 12h14"></path>
        </svg>
        Add Config
      </button>
      <button *ngIf="selectedConfigCount" class="archive-btn" [disabled]="!hasSelectedConfig"
        (click)="deleteSelectedConfigs()">
        Delete ({{ selectedConfigCount }})
      </button>
    </div>
  </div>
  <app-dynamic-table [data]="filteredStaffList" [columns]="tableColumns" [withCheckbox]="true"
    [rowsPerPage]="itemsPerPage" [enablePagination]="true" (selectAll)="toggleSelectAll()"
    (toggleRowSelection)="toggleStaffSelection($event)" (pageChange)="goToPage($event)">
  </app-dynamic-table>
  <app-common-modal [showModal]="showPrintConfigModal" [title]="modalHeader" [buttons]="printConfigModalButtons"
    (onClose)="closePrintConfigModal()" (onAction)="handlePrintConfigAction($event)">
    <div class="config-form modal-body">
      <div class="form-group">
        <label>Name</label>
        <input type="text" class="form-control" [(ngModel)]="newConfig.name" />
      </div>
      <div class="form-group">
        <label>Config Type</label>
        <select class="form-control" [(ngModel)]="newConfig.config_type">
          <option value="passbook">Passbook</option>
          <option value="cheque">Chequebook</option>
        </select>
      </div>
      <div class="form-group">
        <label>Height (mm)</label>
        <input type="number" class="form-control" [(ngModel)]="newConfig.height_mm" />
      </div>
      <div class="form-group">
        <label>Width (mm)</label>
        <input type="number" class="form-control" [(ngModel)]="newConfig.width_mm" />
      </div>
      <div class="form-group">
        <label>Font Type</label>
        <select class="form-control" [(ngModel)]="newConfig.font_type">
          <option *ngFor="let font of fontTypes" [value]="font.value">{{ font.label }}</option>
        </select>
      </div>
      <div class="form-group">
        <label>Lines Per Inch (LPI)</label>
        <select class="form-control" [(ngModel)]="newConfig.lines_per_inch">
          <option *ngFor="let lpi of lpiOptions" [value]="lpi.value">{{ lpi.label }}</option>
        </select>
      </div>
      <div class="form-group">
        <label>Characters Per Inch (CPI)</label>
        <select class="form-control" [(ngModel)]="newConfig.characters_per_inch">
          <option *ngFor="let cpi of cpiOptions" [value]="cpi.value">{{ cpi.label }}</option>
        </select>
      </div>
    </div>
  </app-common-modal>

  <!-- Confirmation Modal for Delete -->
  <app-common-modal [showModal]="showDeleteModal" [title]="'Confirm Delete'" [buttons]="deleteModalButtons"
    (onClose)="closeDeleteModal()" (onAction)="handleDeleteAction($event)">
    <div class="modal-body">
      <p>Are you sure you want to delete the selected configuration(s)? This action cannot be undone.</p>
    </div>
  </app-common-modal>
</div>
